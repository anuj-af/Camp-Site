<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/stylesheets/index.css">
<h1 class="text-center mt-0 mb-3">Campgorunds Map</h1>
<div id="map" class="mb-5 cluster-map shadow-sm"></div>
<div class="lead-text">
    <h2 class="mb-1">Explore All Campgorunds</h2>
    <p class="mb-3 text-muted">Choose the right destination from a range of campgrounds in India, based on your custom preferences. Your next vacation is just a filter away!</p>
</div>
<div class="row">
    <% for(let campground of campgrounds){ %>
        <div class="col-md-4">
            <a href="/campgrounds/<%= campground._id %>">
                <div class="card shadow-sm my-3 align-self-stretch mx-1">
                    <img class="card-img-top img-fluid rounded" id="idxImg" alt="" src="<%= campground.image ? campground.image : campground.images[0].url %>" crossorigin="anonymous">
                    <div class="card-body p-3">
                        <h5 class="card-title mb-1"><%= campground.title %></h5>
                        <p class="card-text text-muted mb-3" id="card-description"><%= campground.description %></p>
                        <p class="card-text d-flex justify-content-between mb-2">
                            <small class="card-text fw-medium"><%= campground.location %></small>
                            <small class="card-text fw-medium">&#8377;<%= campground.price %>/unit</small>
                        </p>
                    </div>
                </div>
            </a>
        </div>
    <% } %>
</div>

    <script>
            const campgrounds = { features: <%- JSON.stringify(campgrounds) %>};
            const MAPBOX_TOKEN = '<%- process.env.MAPBOX_TOKEN %>';
    </script>
    <script src="/javascripts/renderClusterMap.js"></script>